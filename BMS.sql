CREATE DATABASE BMS

USE BMS

CREATE TABLE BOOKS(
BOOK_ID VARCHAR(6) PRIMARY KEY,
TITLE VARCHAR(80),
PUB_ID CHAR(4),
AU_ID VARCHAR(15),
NOTES VARCHAR(200),
USERNAME NVARCHAR(255)
)
ALTER TABLE BOOKS ADD CONSTRAINT FK_PUB_ID FOREIGN KEY (PUB_ID) REFERENCES PUBLISHERS(PUB_ID)
ALTER TABLE BOOKS ADD CONSTRAINT FK_AU_ID FOREIGN KEY (AU_ID) REFERENCES AUTHORS(AU_ID)
ALTER TABLE BOOKS ADD CONSTRAINT FK_USERNAME FOREIGN KEY (USERNAME) REFERENCES USERS(USERNAME)
INSERT INTO BOOKS VALUES ('B1','Skill Football','P5','1','Amazing','sa')
INSERT INTO BOOKS VALUES ('B2','Harry Potter','P1','2','Amazing','sa')
INSERT INTO BOOKS VALUES ('B3','Doremon','P4','1','Amazing','sa')
INSERT INTO BOOKS VALUES ('B4','Thor and lover','P3','2','Amazing','sa')
INSERT INTO BOOKS VALUES ('B5','Manchester City','P1','3','Amazing','sa')
INSERT INTO BOOKS VALUES ('B6','Love me do','P2','1','Amazing','sa')
INSERT INTO BOOKS VALUES ('B7','That girl','P2','3','Amazing','sa')
INSERT INTO BOOKS VALUES ('B8','Take me to your heart','P2','2','Amazing','sa')
INSERT INTO BOOKS VALUES ('B9','Pysechor','P2','4','Amazing','sa')
INSERT INTO BOOKS VALUES ('B10','One Piecie','P2','5','Amazing','sa')
INSERT INTO BOOKS VALUES ('B11','Sweet By Syscho','P1','1','Amazing','thangnc')
INSERT INTO BOOKS VALUES ('B12','Beautiful Girl','P2','1','Amazing','thangnc')
INSERT INTO BOOKS VALUES ('B13','Sorry','P1','4','Amazing','thangnc')
INSERT INTO BOOKS VALUES ('B14','What do you mean','P2','3','Amazing','thangnc')
INSERT INTO BOOKS VALUES ('B15','Love is gone','P2','4','Amazing','thangnc')
INSERT INTO BOOKS VALUES ('B16','Light switch','P3','1','Amazing','thangnc')
INSERT INTO BOOKS VALUES ('B17','Payphone','P3','3','Amazing','thangnc')
INSERT INTO BOOKS VALUES ('B18','Pop Mage','P3','4','Amazing','thangnc')
INSERT INTO BOOKS VALUES ('B19','See you again','P3','5','Amazing','thangnc')
INSERT INTO BOOKS VALUES ('B20','At my worst','P5','5','Amazing','thangnc')
select * from books
CREATE TABLE AUTHORS (
AU_ID VARCHAR(15) PRIMARY KEY,
AU_NAME VARCHAR(61),
AU_ADDRESS VARCHAR(62)
)
INSERT INTO AUTHORS VALUES ('1','Kevin De Bruyne','Belgium')
INSERT INTO AUTHORS VALUES ('2','Ruben Dias','Portugal')
INSERT INTO AUTHORS VALUES ('3','Bernardo Silva','Portugal')
INSERT INTO AUTHORS VALUES ('4','Phil Foden','England')
INSERT INTO AUTHORS VALUES ('5','Rodri','Spain')

CREATE TABLE PUBLISHERS(
PUB_ID CHAR(4) PRIMARY KEY,
PUB_NAME VARCHAR(40),
PUB_ADDRESS VARCHAR(54)
)
INSERT INTO PUBLISHERS VALUES ('P1','Jone Stones','England')
INSERT INTO PUBLISHERS VALUES ('P2','Kyle Walker','England')
INSERT INTO PUBLISHERS VALUES ('P3','Kalvin Phillips','England')
INSERT INTO PUBLISHERS VALUES ('P4','Joao Cancelo','Portugal')
INSERT INTO PUBLISHERS VALUES ('P5','Ryzad Mahrez','Morroco')

CREATE TABLE USERS(
USERNAME NVARCHAR(255) PRIMARY KEY,
DISPLAYNAME NVARCHAR(MAX),
PASSWORD NVARCHAR(255),
DESCRIPTION NVARCHAR(MAX)
)
INSERT INTO USERS VALUES ('sa', N'SA','123456','')
INSERT INTO USERS VALUES ('thangnc', N'Nguyễn Công Thắng','123456','')

SELECT * FROM USERS WHERE USERNAME = 'sa' and PASSWORD = '123456'


SELECT A.BOOK_ID,A.TITLE,B.PUB_NAME,C.AU_NAME,A.NOTES FROM PUBLISHERS B INNER JOIN BOOKS A ON A.PUB_ID = B.PUB_ID INNER JOIN AUTHORS C ON A.AU_ID = C.AU_ID
INNER JOIN USERS D ON A.USERNAME = D.USERNAME WHERE D.USERNAME = 'sa' AND C.AU_NAME LIKE 'SA'


SELECT DISTINCT A.PUB_ID,A.PUB_NAME,A.PUB_ADDRESS FROM PUBLISHERS A INNER JOIN BOOKS B ON A.PUB_ID = B.PUB_ID INNER JOIN USERS C ON B.USERNAME = C.USERNAME
WHERE C.USERNAME = 'sa'

SELECT DISTINCT A.PUB_ID,A.PUB_NAME,A.PUB_ADDRESS FROM PUBLISHERS A INNER JOIN BOOKS B ON A.PUB_ID = B.PUB_ID INNER JOIN USERS C ON B.USERNAME = C.USERNAME WHERE C.USERNAME = 'sa'















